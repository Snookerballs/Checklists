<template name="create_checklist">
	{{#if currentUser}}
	<div class="create-checklist" id="createChecklist">
		<h1 class="title-header"> Create</h1>
		<center><i class="separator material-icons">lens</i><br></center>
		{{> list}}
		<br>
		<center> <i class="separator material-icons">lens</i></center>
		{{> titleAndCategory}}
	</div>

	{{> addTaskForm}}
	<br>
	<div id="save-checklist-button-wrapper">
		<button class="btn waves-effect waves-light col s6 left" id = "save-checklist-button" type="submit" form="title-form">Save</button>
		<button class="btn waves-effect waves-light col s6 right" id = "save-and-publish-checklist-button" type="submit" form="title-form">Save And Publish</button></div>
		{{else}}
		{{> loginPrompt}}
		{{/if}}
	</template>

	<template name="titleAndCategory">
		<ul class = "collection" id="title-form-wrapper">
			<form id="title-form" class="checklist-form col s6">
				<h3 class="form-header"> Description </h3>
				<div class="row">
					<div class="input-field col s12">
						<input id="checklistName" name="checklistName" type="text" class="validate">
						<label for="checklistName">Name of Checklist</label>
					</div>
					<div class="input-field col s12">
						<select id= "checklistCategory" name= "checklistCategory">
							<option value="1">Programming</option>
							<option value="2">Art</option>
							<option value="3">Music</option>
							<option value="4">Photography</option>
						</select>
						<label>Category</label>
					</div>
				</div>
			</form>
		</ul>
	</template>

	<template name="list">
		<ul class="collapsible" id = "checklist">
			{{#each task}}
			<li class = "task{{@index}}">
				<div class="collapsible-header" id="create-collapsible-header">
					<input id="checklist-box{{@index}}" class="checklist-boxes" type="checkbox">
					<label for="checklist-box{{@index}}"></label>
					{{> editTaskModal}}
					<a href="#" class="delete-task secondary-content" style="color: #f39d9c"><i class="material-icons">
					close</i></a>

					<a href="#" class="move-up secondary-content" style="color: #454851"><i class="material-icons">
					arrow_upward</i></a>
					<a href="#" class="move-down secondary-content" style="color: #454851"><i class="material-icons">
					arrow_downward</i></a>

					<div class="name" id= "create-checklist-task-name"><strong>{{taskName}}</strong></div>
				</div>
				<div class="collapsible-body">
					<span>
						<strong>Description</strong>
						<br>
						<div class="description">{{{taskDescription}}}</div>
						<hr>
						<strong>Resources</strong>
						<br>
						{{> resources}}
					</span>
				</div>
			</li>
			{{/each}}
		</ul>
	</template>

	<template name="editTaskModal">
		<!-- Modal Trigger -->
		<a class="editTask secondary-content modal-trigger" id="create-edit-task" data-target="edit-task-modal" style="color: #f39d9c"><i class="material-icons">create</i></a>

		<!-- Modal Structure -->
		<div id="edit-task-modal" class="modal">
			<div class="modal-content">
				{{> editTaskForm}}
			</div>
			<div class="modal-footer" style="background-color: #454851">
				<center><button class="editTaskButton waves-effect waves-light btn" type="submit" form="edit-form" style="background-color: #f39d9c">Edit</button></center>
			</div>
		</div>
	</template>

	<template name="editTaskForm">
		<div id="editForm">
			<form class="edit-form" id="edit-form">
				<center><h3 class="edit-form-header"> Edit Task </h3></center>
				<div class="row">
					<div class="input-field col s12">
						<h4 class="edit-form-header">Task Name</h4>
						<input value= "" id="editTaskName" name = "editTaskName" type="text" class="validate">
						<label for="editTaskName"></label>
					</div>
				</div>
				<div class="row">
					<h4 class="edit-form-header">Task Description</h4>
					<div class="input-field col s12">
						<textarea id="editDescription" name = "editDescription" class="materialize-textarea"></textarea>
						<label for="editDescription"></label>
					</div>
				</div>
			</form>
			<h4 class="edit-form-header">Task Resources</h4>
			{{>editResourceList}}

			<form class="resource-form" id="edit-resource-form">
				<div id="resource-row">
					<div class="input-field col s12">
						<input id="resourceName" name="resourceName" type= "text">
						<label for="resourceName">Resource Name</label>
					</div>
					<div class="input-field col s12">
						<input id="resourceLink" name="resourceLink" type="text">
						<label for="resourceLink">Resource Link</label>
					</div>
				</div>
							<button class="edit-resource-button btn-floating btn-large waves-effect waves-light" id="resource-submit-button" type="submit" form="edit-resource-form"><i class="material-icons">add</i></button>
			</form>

		</div>
	</template>

	<template name="addTaskForm">
		<div id="add-form-wrapper">
			<form class="add-form" id="add-form">
				<h3 class="form-header"> Add Task </h3>
				<div class="row">
					<div class="input-field col s12">
						<input id="taskName" name="taskName" type="text" class="validate">
						<label for="taskName">Task Name</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<textarea id="description" name="description" class="materialize-textarea"></textarea>
						<label for="description">Description</label>
					</div>
				</div>
			</form>
			<form class="resource-form col s6" id="add-resource-form">
				<div id="resource-row">
					<h4 class="form-header"> Resources</h4>
					{{> resourceList}}
					<div class="input-field col s12">
						<input id="resourceName" name="resourceName" type= "text">
						<label for="resourceName">Resource Name</label>
					</div>
					<div class="input-field col s12">
						<input id="resourceLink" name="resourceLink" type="text">
						<label for="resourceLink">Resource Link</label>
					</div>
					<button class="btn-floating btn-large waves-effect waves-light" id="resource-submit-button" type="submit" form="add-resource-form"><i class="material-icons small">add</i></button>
				</div>
			</form>

			<button class="waves-effect waves-light btn modal-close" id="add-task-button" type="submit" form="add-form">Add!</button>
		</div>
	</template>

	<template name="resourceList">
		<ul class="resourceList">
		</ul>
	</template>

	<template name="editResourceList">
		<ul class="editResourceList">
		</ul>
	</template>

	<template name="resources">
		<div class="resources">
			<ul>
				{{#each taskResources}}
				<li class= "resource-item">
					<a href="{{link}}">{{name}}</a>
				</li>
				{{/each}}
			</ul>
		</div>
	</template>
