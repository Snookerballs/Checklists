<template name="checklist-page">
	{{#if currentUser}}
	{{> checklist}}
	{{else}}
	{{> loginPrompt}}
	{{/if}}
</template>

<template name="checklist">
	{{#if defined}}
	<center><h2>{{name}}</h2></center>
	<center> Created by: {{creator}} </center>
		<center> Rating: {{listRating}} ({{raterNumber}} votes) </center>
	<ul class="collapsible" id="preview-page-collapsible">
		{{#each task}}
		<li class = "task{{@index}}">
			<div class="collapsible-header" id="preview-page-collapsible-header">
				<div class="checkbox">
					<input id="checklist-box{{@index}}" class="checklist-box" type="checkbox" disabled = "disabled" checked ="checked">
					<label for="checklist-box{{@index}}"></label>
				</div>
				<div class="name"><strong>{{taskName}}</strong></div>
			</div>
			<div class="collapsible-body">
				<span>
					<strong>Description</strong>
					<br>
					<div class="description">{{{taskDescription}}}</div>
					<hr>
					<strong>Resources</strong>
					<br>
					<div class="resources">{{{taskResources}}}</div>
				</span>
			</div>
		</li>
		{{/each}}
	</ul>
	<div id="button-wrapper">
		<span> <button class="waves-effect waves-teal btn right" id="use-button" name="action">Use This Checklist!</button></span>
		{{> rating}}
		<button class="waves-effect waves-teal btn" id="publish-button" name="action">Publish Checklist</button>
		<button class="waves-effect waves-teal btn" id="delete-button" name="action">Delete Checklist</button>
		<a href="{{pathFor route = 'Edit Created Checklist' _id=listId}}" id="edit-button" class="waves-effect waves-light btn" >Edit Checklist</a>
	</div>


	<div id="comments-wrapper">
	{{> comments}}
	</div>
	{{/if}}
</template>

<template name="comments">
		<div id="comments-form">
	<h3> Comments </h3>
		<form class="commentForm col s12">
			<div class="row">
				<div class="input-field col s10">
					<i class="material-icons prefix">mode_edit</i>
					<textarea id="comment" class="materialize-textarea"></textarea>
					<label for="icon_prefix2">Write your comment here!</label>
				</div>
			<button class="btn waves-effect waves-light" id="post-button" type="submit" name="action">post</button>
			</div>
			</form>
		</div>

		<!-- Modal UX3 Structure -->
	  <div id="modalUX3" class="modal center-align">
	    <div class="modal-content">
	      <h4>Thank you for your comments!</h4>
	      <p>Go on to view other checklists!</p>
	    </div>
			<div>
				<img src="/images/goodjob.gif">
			</div>
	    <div class="modal-footer">
	      <a href="{{ pathFor route = 'Categories' }}" class="modal-action modal-close waves-effect waves-green btn-flat">Go to Categories</a>
	    </div>
	  </div>

		<script>
		$(document).ready(function(){
			// the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
			$('.modal').modal();
		});
		</script>

		<ul class="collection" id="comments-list">
			{{#each post}}
			<h5>{{username}} says:</h5>
			Created on: {{formatDate createdAt}}
			<li class="collection-item">{{comment}}</li>
			{{/each}}
		</ul>
	</template>

	<template name="rating">
		<h5>Rate this Checklist! </h5>
		<form action="#" class ="rating-system">
			<input name = "starContainer" type="radio" id="one" value=1 required><i id = "star-one" class = "star material-icons">star</i>
			<label for="one"></label>

			<input name = "starContainer" type="radio" id="two" value=2>
			<i id = "star-two" class="star material-icons">star</i>
			<label for="two"></label>

			<input name = "starContainer" type="radio" id="three" value=3>
			<i id = "star-three" class="star material-icons">star</i>
			<label  for="three"></label>

			<input name = "starContainer" type="radio" id="four" value=4>
			<i id = "star-four" class="star material-icons">star</i>
			<label for="four"></label>

			<input name = "starContainer" type="radio" id="five" value=5>
			<i id = "star-five" class="star material-icons">star</i>
			<label for="five"></label>

			 <button class="waves-effect waves-teal btn-flat" id="rate-button" type="submit" name="action">Rate</button>
		</form>
		<br>

		<!-- Modal UX2 Structure -->
	  <div id="modalUX2" class="modal center-align">
	    <div class="modal-content">
	      <h4>Thank you for rating!</h4>
	      <p>Go on to leave a comment too!</p>
	    </div>
			<div>
				<img src="/images/thankyou.gif">
			</div>
	    <div class="modal-footer">
	      <a href="#comment" class="modal-action modal-close waves-effect waves-green btn-flat">Go to Comment</a>
	    </div>
	  </div>

		<script>
		$(document).ready(function(){
			// the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
			$('.modal').modal();
		});
		</script>
	</template>
